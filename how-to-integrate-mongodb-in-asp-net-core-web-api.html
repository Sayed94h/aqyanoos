<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <meta property="article:publisher" content="https://www.facebook.com/CodingAqyanoos"> -->
    <!-- <meta property="article:modified_time" content="2024-01-17T10:38:34+00:00"> -->

    <!-- meta tags that don't need change -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:site_name" content="Aqyanoos">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@CodingAqyanoos">

    <!-- link tags that don't need change -->

    <link rel="icon" type="image/ico" href="/favicon.ico">
    <link rel="shortcut icon" type="image/ico" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- meta tags that need small change -->
    <meta property="og:url" content="https://aqyanoos.com/how-to-integrate-mongodb-in-asp-net-core-web-api.html">

    <!-- tags that need full change -->

    <title>How to integrate MongoDB in ASP .Net Core Web API"</title>

    <meta name="title" content="how-to-integrate-mongodb-in-asp-net-core-web-api">
    <meta property="og:title" content="how-to-integrate-mongodb-in-asp-net-core-web-api">
    <meta name="twitter:title" content="how-to-integrate-mongodb-in-asp-net-core-web-api">

    <meta name="description"
        content="In this course you will learn how to integrate mongodb in asp net core web api. First we configure and setup MongoDB for .Net then we will do the .Net Part">
    <meta name="twitter:description"
        content="In this course you will learn how to integrate mongodb in asp net core web api. First we configure and setup MongoDB for .Net then we will do the .Net Part">
    <meta property="og:description"
        content="In this course you will learn how to integrate mongodb in asp net core web api. First we configure and setup MongoDB for .Net then we will do the .Net Part">

    <meta name="twitter:image" content="https://aqyanoos.com/images/web-development-course-online-free.png">
    <meta name="keywords"
        content="mongodb, web api, integrate mongodb in web api, visual studio, mongodb settings, setup mongodb for .net, mongodb .net, mongodb inside visual studio, mongodb c#, how to configure mongodb for web api">
    <meta name="twitter:image:alt"
        content="mongodb, web api, integrate mongodb in web api, visual studio, mongodb settings, setup mongodb for .net, mongodb .net, mongodb inside visual studio, mongodb c#, how to configure mongodb for web api">

    <!-- for development -->
    <script defer="defer" src="/static/js/main.js"></script>
    <!-- for production -->
    <!-- <script defer="defer" src="/static/js/main.js"></script> -->
    <link href="/static/css/main.css" rel="stylesheet">
</head>

<body>
    <section class="page">
        <!-- side menu -->
        <section class="menu-wrapper">
            
    <div class="menu-wrapper-content">
                <div class="menu-wrapper-content-hdr">
                    <div><a href="/"><img src="/images/android-chrome-512x512.png" alt="Aqyanoos company logo"></a></div>
                    <div class="side-menu-close-btn side-menu-action-btn">X</div>
                </div>
                <nav class="menu-wrapper-content-items">
                    <div class="bold">Main</div>
                    <div class="side-menu-items">
                        <a href="/" class="Home_page">Home</a><div class="line-bar"> | </div>
                        <a href="/#/services" class="side-menu-action-btn" rel="noreferrer noopener nofollow">Services</a><div class="line-bar"> | </div>
                        <a href="/#/contact" class="side-menu-action-btn" rel="noreferrer noopener nofollow">Contact</a><div class="line-bar"> | </div>
                        <a href="/jobs/full-stack-dot-net-developer-job-internship.html" class="side-menu-action-btn" >Jobs</a><div class="line-bar"> | </div>
                        <a href="/#/privacy-policy" class="side-menu-action-btn" rel="noreferrer noopener nofollow">Privacy Policy</a><div class="line-bar"> | </div>
                        <a href="/#/about" class="side-menu-action-btn" rel="noreferrer noopener nofollow">About</a>
                    </div>

                    <div class="bold">Online Courses</div>
                    <div class="side-menu-items">
                        <a href="/#/tutorials-source-code" class="side-menu-action-btn" rel="noreferrer noopener nofollow">Source Code</a><div class="line-bar"> | </div>
                        <a href="/#/tutorials" class="side-menu-action-btn" rel="noreferrer noopener nofollow">Tutorials</a><div class="line-bar"> | </div>
                        <a href="https://www.youtube.com/@CodingAqyanoos" class="side-menu-action-btn" target="_blank" rel="noreferrer noopener nofollow">YouTube</a>
                    </div>
                    <div class="bold">Tools</div>
                    <div><a href="/online-text-or-code-editor-notepad.html" >Online Notepad</a></div>
                    <div>
                        <a href="/best-free-android-apps.html">Free Useful Apps</a>
                    </div>
                    <div>
                        <a href="/free-online-qr-code-generator-for-payment.html" >QR-Code Generator for Payment</a>
                    </div>
                    <div>
                        <a href="/free-online-qr-code-generator.html" >QR-Code Generator - Any Text</a>
                    </div>
                    <div><a href="/#/how-to-convert-decimal-to-hex" class="side-menu-action-btn" rel="noreferrer noopener nofollow">Hex / Decimal Convertor</a></div>
                    <div class="bold">More...</div>
                    
                    <div><a href="/best-books-for-programmers-amazon.html" >Best Books for You</a></div>
                    <div><a href="/best-laptop-for-students-amazon.html" >Top Laptops for You</a></div>
                    <div><a href="/#/support" rel="noreferrer noopener nofollow">Support</a></div>

                </nav>
            </div>
    
        </section>
        <section class=" top-menu-rest">
            <div class="menu-icon  ">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100px"
                    height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100">
                    <g>
                        <path fill="#fff" d="M17.563,30.277h0.012c0,1.245,1.004,2.254,2.246,2.267v0.002h60.359v-0.001c1.248-0.006,2.259-1.018,2.259-2.268h0.01
    l0-10.459h0c-0.002-1.251-1.017-2.265-2.269-2.265l0,0H19.821v0c0,0,0,0,0,0c-1.253,0-2.269,1.017-2.269,2.269
    c0,0.039,0.01,0.076,0.012,0.115L17.563,30.277z"></path>
                        <path fill="#fff" d="M80.179,42.504L80.179,42.504H19.821v0c0,0,0,0,0,0c-1.253,0-2.269,1.017-2.269,2.269c0,0.039,0.01,0.076,0.012,0.115
    l0,10.34h0.012c0,1.245,1.004,2.254,2.246,2.267v0.002h60.359v-0.001c1.248-0.006,2.259-1.018,2.259-2.268h0.01l0-10.459h0
    C82.446,43.518,81.431,42.504,80.179,42.504z"></path>
                        <path fill="#fff" d="M80.179,67.454L80.179,67.454H19.821l0,0c0,0,0,0,0,0c-1.253,0-2.269,1.017-2.269,2.269c0,0.039,0.01,0.076,0.012,0.115
    l0,10.34h0.012c0,1.245,1.004,2.254,2.246,2.267v0.002h60.359v-0.001c1.248-0.006,2.259-1.019,2.259-2.269h0.01l0-10.459h0
    C82.446,68.468,81.431,67.454,80.179,67.454z"></path>
                    </g>
                </svg>
            </div>
        </section>
        <!-- top main menu -->
        <section class=" main-nav top-main-menu">
            
    <nav class="main-nav-holder">
        <a href="/" class="Home_page">Home</a>
        <a class="Services_page " href="/#/services" rel="noreferrer noopener nofollow">Services</a>
        <a class="Tutorials_page " href="/#/tutorials-source-code" rel="noreferrer noopener nofollow">Source Codes</a>
        <a class="Privacy_page  hidden" href="/#/tutorials-source-code" rel="noreferrer noopener nofollow">Privacy Policy</a>
        <a class="Contact_page " href="/#/contact" rel="noreferrer noopener nofollow">Contact</a>
        <a class="About_page " href="/#/about" rel="noreferrer noopener nofollow">About</a>
    </nav>
    
        </section>
        <!-- page header - for now just a spacer because the top-nav is positioned fixed -->
        <div class="page-header">
            <span3000></span3000>
        </div>
        <!-- some specific page related navigation links -->
        <section class="page-specific-links">
            <div class="back-btn">
                <a class="link" href="/#/tutorials?name=2">Back to the List</a> <br> <br>
            </div>
        </section>
        <!-- main article -->
        <article id="main" class="main-content">
            <header class="article-title">
                <h1 title="How to integrate MongoDB in ASP .Net Core Web API">How to integrate MongoDB in ASP .Net Core
                    Web API</h1>
            </header>
            <section class="article-content article-description">
                <p>In this course you will learn how to integrate mongodb in asp net core web api. First we configure
                    and setup MongoDB for .Net then we will do the .Net Part inside Visual Studio.</p>
                <p><mark>I also have a full course on YouTube about integrating MongoDB in ASP .Net Core Web API. The
                        course is a full stack CRUD Application Project with React.js, MongoDB and Web API so you learn
                        React and Web API as well.</mark></p>
                <p>
                    You can watch the full course or the video tutorial <a href="https://youtu.be/YkLyu8bZwjc"
                        title="How to integrate MongoDB in ASP .Net Core Web API" class="link" target="_blank"
                        rel="noreferrer noopener nofollow">Here</a>
                </p>
            </section>
            <section>
                <h5>In just 9 steps you can configure and setup Web API for making successful API calls to MongoDB Cloud
                    Database:</h5>
                <ol>
                    <li class="bold">Configure MongoDB Cluster.</li>
                    <ol>
                        <li>Create a new Project if you have not created yet (You can also use any other projects).</li>
                        <li>Click on the project that you want to connect to Web API then create a cluster by clicking
                            on The big button "Build a Database":</li>
                        <ol>
                            <li>Select the correct options</li>
                            <li>Select the correct provider</li>
                            <li>Select the correct region</li>
                            <li>Give a good Cluster name</li>
                            <li>Give a good username and password</li>
                            <li>Select the correct environment type</li>
                            <li>Add the correct IP address. It also automatically detects the IP address of the machine
                                with which you configure MongoDB But if you use the MongoDB in another machine then you
                                have to add the IP address of that machine as well.</li>
                        </ol>
                        <li>
                            Click on the "Connect" button inside your MongoDB Cluster to configure the MongoDB Cluster
                        </li>
                        <ol>
                            <li>Select the driver(C# .Net)</li>
                            <li>Select the latest version</li>
                            <li>Copy the connection string and replace the "&lt;password&gt;" with the actual user
                                Password</li>
                        </ol>
                        <li>Create Database</li>
                        <ol>
                            <li>Click on the tab button "Collections"</li>
                            <li>Click on the button "Add My Own Data"</li>
                            <li>Give a Database name and Collection name (You need these names later when you setup Web
                                API)</li>
                            <li>When you have Database and collection(basically Table), you can add fields(columns) to
                                your collecion or table. </li>
                            <li>By Default your collection has only on field(that is the "_id")</li>
                            <li>Add new fields by clicking on "Insert Document"</li>
                            <li>Choose the correct data type for your fields</li>
                        </ol>
                    </ol>
                    <li class="bold">Now you are done in MongoDB, let's jump to the Visual Studio</li>
                    <li class="bold">Create a new project if you do not have any(it can be only Web API project or
                        combination of Web
                        API and other types like MVC or React.js frontend,...)</li>
                    <li class="bold">Add a new object inside "appsettings.json" to store the MongoDB data: <button
                            class="copy-btn mongodb-webapi">Copy</button> <br> <br><textarea class="w-100 code-holder"
                            readonly>
                // In my case the Connection string is "Connection", 
                // the Database name is "DatabaseName", 
                // and the Collection name is CollectionName. You can name them whatever you like.
                
                "ConnectionStrings": {
                    "CollectionName": "students",
                    "DatabaseName": "aqyanoosDB",
                    "Connection": "mongodb+srv://school1:&lt;password&gt;@school-cluster.3wo8xzy.mongodb.net/?retryWrites=true&amp;w=majority"
                  }
                </textarea></li>
                    <li class="bold">Add middleware for mongodb in "Program.cs": <button
                            class="copy-btn mongodb-webapi">Copy</button><br>
                        <br><textarea class="w-100 code-holder" readonly>
                    // Add the following code right below the comment that says // Add services to the container."
                    // DatabaseSettings is the model for the Database object inside "appsettings.json"
                    // ConnectionStrings is the name of the object inside "appsettings.json" for MongoDB
                    // StudentServices is the class with all the services to communicate with MongoDB
                   // In case there are errors: Manually import the DatabaseSettings and StudenServices(The naming is because my YouTube tutorial was about Student management)
                
                builder.Services.Configure&lt;DatabaseSettings&gt;(
                                builder.Configuration.GetSection("ConnectionStrings"));
                
                builder.Services.AddSingleton&lt;StudentServices&gt;();
                </textarea>
                    </li>
                    <li class="bold">The Code For "DatabaseSettings.cs": <button
                            class="copy-btn mongodb-webapi">Copy</button> <br>
                        <br><textarea class="w-100 code-holder" readonly>
                    namespace WebApiMongoDB.Data
                {
                    public class DatabaseSettings
                    {
                        public string CollectionName { get; set; }
                        public string DatabaseName { get; set; }
                        public string Connection { get; set; }
                    }
                }
                    </textarea>
                    </li>
                    <li class="bold">The Code For "Student.cs". Student is for example the name of your collection
                        inside MongoDB and
                        based on your collection you need to create a model in Web API: <button
                            class="copy-btn mongodb-webapi">Copy</button> <br> <br><textarea class="w-100 code-holder"
                            readonly>

                using MongoDB.Bson;
                using MongoDB.Bson.Serialization.Attributes;
                
                namespace WebApiMongoDB.Models
                {
                    [BsonIgnoreExtraElements]
                    public class Student
                    {
                        [BsonId]
                        [BsonRepresentation(BsonType.ObjectId)]
                        public string Id { get; set; } = string.Empty;
                
                        [BsonElement("firstname")]
                        public string FirstName { get; set; } = "Student First Name";
                
                        [BsonElement("lastname")]
                        public string LastName { get; set; } = "Student Last Name";
                
                        [BsonElement("department")]
                        public string Department { get; set; } = "Department";
                
                        [BsonElement("class")]
                        public string ClassName { get; set; } = "Class Name";
                
                        [BsonElement("gender")]
                        public byte Gender { get; set; } = 1;
                
                        [BsonElement("birthday")]
                        public DateTime DateOfBirth { get; set; }
                
                        [BsonElement("age")]
                        public int Age { get; set; }
                
                        [BsonElement("graduated")]
                        public bool IsGraduated { get; set; }
                    }
                }
                
                    </textarea></li>
                    <li class="bold">The Code For "StudentServices.cs". Student is for example the name of your
                        collection inside
                        MongoDB. It is best practice to keep everything separated(one service for one collection):
                        <button class="copy-btn mongodb-webapi">Copy</button> <br> <br><textarea
                            class="w-100 code-holder" readonly>
                    using Microsoft.Extensions.Options;
                using MongoDB.Driver;
                using WebApiMongoDB.Data;
                using WebApiMongoDB.Models;
                
                namespace WebApiMongoDB.Services
                {
                    public class StudentServices
                    {
                        private readonly IMongoCollection&lt;Student&gt; _studentCollection;
                
                        public StudentServices(IOptions&lt;DatabaseSettings&gt; settings)
                        {
                            var mongoClient = new MongoClient(settings.Value.Connection);
                            var mongoDb = mongoClient.GetDatabase(settings.Value.DatabaseName);
                            _studentCollection = mongoDb.GetCollection&lt;Student&gt;(settings.Value.CollectionName);
                        }
                
                        // get all students
                        public async Task&lt;List&lt;Student&gt;&gt; GetAsync() =&gt; await _studentCollection.Find(_ =&gt; true).ToListAsync();
                        
                
                        // get student by id
                        public async Task&lt;Student&gt; GetAsync(string id) =&gt;
                            await _studentCollection.Find(x =&gt; x.Id == id).FirstOrDefaultAsync();
                
                        // add new student 
                        public async Task CreateAsync(Student newStudent) =&gt;
                            await _studentCollection.InsertOneAsync(newStudent);
                
                        // update student
                
                        public async Task UpdateAsync(string id, Student updateStudent) =&gt;
                            await _studentCollection.ReplaceOneAsync(x=&gt; x.Id == id, updateStudent);
                
                        // delete student
                        public async Task RemoveAsync(string id)=&gt;
                            await _studentCollection.DeleteOneAsync(x=&gt; x.Id == id);
                    }
                }
                
                    
                    </textarea>
                    </li>
                    <li class="bold">
                        The Code For "StudentController.cs". Student is for example the name of your
                        collection inside
                        MongoDB. It is best practice to keep everything separated(one controller for one collection):
                        <button class="copy-btn mongodb-webapi">Copy</button> <br> <br>
                        <textarea class="w-100 code-holder" readonly>
                    using Microsoft.AspNetCore.Mvc;
                using WebApiMongoDB.Models;
                using WebApiMongoDB.Services;
                
                // For more information on enabling Web API for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
                
                namespace WebApiMongoDB.Controllers
                {
                    [Route("api/student")]
                    [ApiController]
                    public class StudentController : ControllerBase
                    {
                        private readonly StudentServices _studentServices;
                
                        public StudentController(StudentServices studentServices) {
                            _studentServices = studentServices;
                        }
                
                
                        // GET: api/student
                        [HttpGet]
                        public async Task&lt;List&lt;Student&gt;&gt; Get() =&gt; await _studentServices.GetAsync();
                
                        // GET api/student/64a51019c925955cfda51194
                        [HttpGet("{id:length(24)}")]
                        public async Task&lt;ActionResult&lt;Student&gt;&gt; Get(string id)
                        {
                            Student student = await _studentServices.GetAsync(id);
                            if(student == null)
                            {
                                return NotFound();
                            }
                
                            return student;
                        }
                
                        // POST api/student
                        [HttpPost]
                        public async Task&lt;ActionResult&lt;Student&gt;&gt; Post(Student newStudent)
                        {
                            await _studentServices.CreateAsync(newStudent);
                            return CreatedAtAction(nameof(Get), new {id = newStudent.Id}, newStudent);
                        }
                
                        // PUT api/student/64a51019c925955cfda51194
                        [HttpPut("{id:length(24)}")]
                        public async Task&lt;ActionResult&gt; Put(string id, Student updateStudent)
                        {
                            Student student = await _studentServices.GetAsync(id);
                            if(student == null)
                            {
                                return NotFound("There is no student with this id: "+ id);
                            }
                
                            updateStudent.Id = student.Id;
                
                            await _studentServices.UpdateAsync(id, updateStudent);
                
                            return Ok("Updated Successfully");
                        }
                
                        // DELETE api/student/64a51019c925955cfda51194
                        [HttpDelete("{id:length(24)}")]
                        public async Task&lt;ActionResult&gt; Delete(string id)
                        {
                            Student student = await _studentServices.GetAsync(id);
                            if (student == null)
                            {
                                return NotFound("There is no student with this id: " + id);
                            }
                
                            await _studentServices.RemoveAsync(id);
                
                            return Ok("Deleted Successfully");
                        }
                    }
                }
                
                    </textarea>
                    </li>
                </ol>
            </section>
            <footer class="article-footer related-content">
                <h3>Some other interesting related articles for you</h3>

                <hr>
                <a href="/list-of-all-css-selectors.html" class="link">List Of All CSS Selectors</a>
            </footer>
        </article>

        <div class="source-space"></div>
        <!-- page main footer -->
        <footer class="footer page-main-footer" id="main-footer">
            
    <section class="container-footer">
                    <section>
                        <div>MAIN</div>
                        <a href="/">Home</a>
                        <a href="/#/services" rel="noreferrer noopener nofollow">Services</a>
                        <a href="/#/tutorials-source-code" rel="noreferrer noopener nofollow">Source Code</a>
                        <a href="/#/tutorials" rel="noreferrer noopener nofollow">Tutorials</a>
                        <a href="/#/privacy-policy" rel="noreferrer noopener nofollow">Privacy Policy</a>
                        <a href="/#/about" rel="noreferrer noopener nofollow">About</a>
                    </section>
                    <section>
                        <div>CONTACTS</div>
                        <a href="/#/contact">Contact Page</a>
                        <a href="https://www.youtube.com/@CodingAqyanoos" target="_blank" rel="noreferrer noopener nofollow">YouTube</a>
                        <a href="https://www.facebook.com/CodingAqyanoos" target="_blank" rel="noreferrer noopener nofollow">Facebook</a>
                        <a href="https://twitter.com/CodingAqyanoos" target="_blank" rel="noreferrer noopener nofollow">Twitter</a>
                        <a href="https://www.linkedin.com/company/aqyanoos" target="_blank" rel="noreferrer noopener nofollow">LinkedIn</a>                        
                    </section>
                    <section>
                        <div>TOOLS</div>
                        <a href="/online-text-or-code-editor-notepad.html">Online Notepad</a>
                        <a href="/#/how-to-convert-decimal-to-hex" rel="noreferrer noopener nofollow">Hex / Decimal Convertor</a>
                        <a href="/best-free-android-apps.html">Free Useful Apps</a>
                        <a href="/free-online-qr-code-generator-for-payment.html">QR-Code Generator for Payment</a>
                        <a href="/free-online-qr-code-generator.html">QR-Code Generator - Any Text</a>
                    </section>
                    <section>
                        <div>MORE...</div>
                        
                        <a href="/#/admin" rel="noreferrer noopener nofollow">Admin</a>
                        <a href="/jobs/full-stack-dot-net-developer-job-internship.html" >Jobs</a>
                        <a href="/sitemap.html">Sitemap</a>
                        <a href="/best-laptop-for-students-amazon.html">Best Laptops for You</a>
                        <a href="/best-books-for-programmers-amazon.html">Best Books for You</a>
                        <a href="/#/support" rel="noreferrer noopener nofollow">Support</a>
                    </section>
                </section>
                <hr >
            <div class="d-flex flex-wrap f-col content-c aln-content-c fs-xs">
                <div>
                    <strong>VAT: </strong> <span>BE 1006 604 236</span>
                </div>
                <div class="d-flex flex-wrap space-between">
                    <div><strong>Opening Hours: </strong></div> <div class="ms-5"> Monday to Friday from 08:30 - 17:30</div>
                </div>               
            </div>
            <hr >
                <div class="copyright">© Aqyanoos | 2020 - 2024. All rights reserved.</div>
    
        </footer>
    </section>
</body>

</html>